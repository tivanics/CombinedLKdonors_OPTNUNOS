unosdata <- read_csv("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/LIVER_FORMATS_FLATFILE.DAT", guess_max = 300000)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, fig.width = 10, fig.height = 12, results="asis")
# Chunk 2
library(ggplot2)
library(survminer)
library(survival)
library(dplyr)
library(tidyverse)
library(data.table)
library(forestmodel)
library(Hmisc)
library(sjPlot)
library(stargazer)
library(sjmisc)
library(arsenal)
library(gtsummary)
library(expss)
library(lubridate)
library(ggsignif)
library(haven)
scipen=999
unosdata <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Liver/liver_data.sas7bdat", guess_max = 300000)
unosdata <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Liver/liver_data.sas7bdat")
rm(list=ls())
liver <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Liver/liver_data.sas7bdat")
kidney <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Kidney_ Pancreas_ Kidney-Pancreas/.kidpan_data.sas7bdat.icloud")
kidney <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Kidney_ Pancreas_ Kidney-Pancreas/kidpan_data.sas7bdat")
View(liver)
which(liver$AGE_DON)
View(kidneydonors)
View(kidney)
?inner_join
colnames(liver) <- paste(colnames(liver), "liver", sep = "_")
colnames(kidney) <- paste(colnames(kidney), "kidney", sep = "_")
liver
liver <- liver %>% mutate(DONOR_ID = DONOR_ID_liver)
kidney <- kidney %>% mutate(DONOR_ID = DONOR_ID_kidney)
unosdata <- inner_join(liver, kidney, by="DONOR_ID")
liverdonors <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR)
rm(list=ls())
liver <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Liver/liver_data.sas7bdat")
kidney <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Kidney_ Pancreas_ Kidney-Pancreas/kidpan_data.sas7bdat")
liverdonors <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR)
kidneydonors <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE)
colnames(liverdonors) <- paste(colnames(liverdonors), "liver", sep = "_")
colnames(kidneydonors) <- paste(colnames(kidneydonors), "kidney", sep = "_")
liverdonors <- liverdonors %>% mutate(DONOR_ID = DONOR_ID_liver)
kidneydonors <- kidneydonors %>% mutate(DONOR_ID = DONOR_ID_kidney)
unosdata <- inner_join(liver, kidney, by="DONOR_ID")
rm(kidney)
rm(liver)
unosdata <- inner_join(liver, kidney, by="DONOR_ID")
unosdata <- inner_join(liverdonors, kidneydonors, by="DONOR_ID")
R_MAX_VSIZE
install.packages("usethis")
liver <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Liver/liver_data.sas7bdat")
kidney <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Kidney_ Pancreas_ Kidney-Pancreas/kidpan_data.sas7bdat")
rm(list=ls())
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, fig.width = 10, fig.height = 12, results="asis")
# Chunk 2
library(ggplot2)
library(survminer)
library(survival)
library(dplyr)
library(tidyverse)
library(data.table)
library(forestmodel)
library(Hmisc)
library(sjPlot)
library(stargazer)
library(sjmisc)
library(arsenal)
library(gtsummary)
library(expss)
library(lubridate)
library(ggsignif)
library(haven)
scipen=999
# Chunk 3
liver <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Liver/liver_data.sas7bdat")
kidney <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Kidney_ Pancreas_ Kidney-Pancreas/kidpan_data.sas7bdat")
liverdonors <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR)
kidneydonors <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE)
kidneydonors$TX_DATE
View(kidneydonors$TX_DATE)
kidneydonors %>% select(TX_DATE) %>% View()
kidneydonors$TX_YEAR <- as.numeric(substr(kidneydonors$TX_DATE, 1, 4))
kidneydonors$TX_YEAR
kidneydonors %>% select(kidneydonors$TX_YEAR) %>% View()
kidneydonors %>% select(TX_YEAR) %>% View()
colnames(liverdonors) <- paste(colnames(liverdonors), "liver", sep = "_")
colnames(kidneydonors) <- paste(colnames(kidneydonors), "kidney", sep = "_")
liverdonors <- liverdonors %>% mutate(DONOR_ID = DONOR_ID_liver) %>% select(TX_YEAR_liver >= 2000)
colnames(liverdonors) <- paste(colnames(liverdonors), "liver", sep = "_")
colnames(kidneydonors) <- paste(colnames(kidneydonors), "kidney", sep = "_")
liverdonors
rm(liverdonors)
rm(kidneydonors)
```{r}
liverdonors <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR)
kidneydonors <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE)
kidneydonors$TX_YEAR <- as.numeric(substr(kidneydonors$TX_DATE, 1, 4))
colnames(liverdonors) <- paste(colnames(liverdonors), "liver", sep = "_")
colnames(kidneydonors) <- paste(colnames(kidneydonors), "kidney", sep = "_")
liverdonors <- liverdonors %>% mutate(DONOR_ID = DONOR_ID_liver) %>% select(TX_YEAR_liver >= 2000)
kidneydonors <- kidneydonors %>% mutate(DONOR_ID = DONOR_ID_kidney) %>% select(TX_YEAR_kidney >= 2000)
liverdonors <- liverdonors %>% mutate(DONOR_ID = DONOR_ID_liver) %>% filter(TX_YEAR_liver >= 2000)
kidneydonors <- kidneydonors %>% mutate(DONOR_ID = DONOR_ID_kidney) %>% filter(TX_YEAR_kidney >= 2000)
unosdata <- inner_join(liverdonors, kidneydonors, by="DONOR_ID")
View(unosdata)
unosdata <- left_join(liverdonors, kidneydonors, by="DONOR_ID")
View(unosdata)
liverdonors$DONOR_ID
liverdonors %>% select(DONOR_ID) %>% View()
unosdata <- merge(liverdonors,kidneydonors,by="DONOR_ID")
View(unosdata)
rm(unosdata)
unosdata <- merge(liverdonors,kidneydonors,by="DONOR_ID")
View(unosdata)
class(liverdonors$DONOR_ID)
class(kidneydonors$DONOR_ID)
unosdata <- cbind(liverdonors,kidneydonors,by="DONOR_ID")
unosdata <- cbind(liverdonors,kidneydonors)
unosdata <- merge(liverdonors,kidneydonors, by="DONOR_ID")
View(unosdata)
kidneydonors$DONOR_ID
duplicated(kidneydonors$DONOR_ID)
View(unosdata)
nrow(unosdata)
unosdata <- unosdata %>% filter(DON_TY_liver != "C")
nrow(unosdata)
rm(list=ls())
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, fig.width = 10, fig.height = 12, results="asis")
# Chunk 2
library(ggplot2)
library(survminer)
library(survival)
library(dplyr)
library(tidyverse)
library(data.table)
library(forestmodel)
library(Hmisc)
library(sjPlot)
library(stargazer)
library(sjmisc)
library(arsenal)
library(gtsummary)
library(expss)
library(lubridate)
library(ggsignif)
library(haven)
scipen=999
# Chunk 3
liver <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Liver/liver_data.sas7bdat")
kidney <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Kidney_ Pancreas_ Kidney-Pancreas/kidpan_data.sas7bdat")
liverdonors <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR)
liverdonors %>% select(LITYP) %>% View()
liverdonors %>% select(LIV_DON_TY) %>% View()
liverdonors %>% filter(LIV_DON_TY==10) %>% View()
liverdonorsnondirected <- liverdonors %>% filter(LIV_DON_TY==10)
kidneydonors <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE)
kidneydonorsnondirected <- kidneydonors %>% filter(LIV_DON_TY==10)
kidneydonorsnondirected$TX_YEAR <- as.numeric(substr(kidneydonorsnondirected$TX_DATE, 1, 4))
colnames(liverdonorsnondirected) <- paste(colnames(liverdonorsnondirected), "liver", sep = "_")
colnames(kidneydonorsnondirected) <- paste(colnames(kidneydonorsnondirected), "kidney", sep = "_")
liverdonorsnondirected <- liverdonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_liver) %>% filter(TX_YEAR_liver >= 2000)
rm(liverdonorsnondirected)
liverdonorsnondirected <- liverdonors %>% filter(LIV_DON_TY==10)
kidneydonors <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE)
kidneydonorsnondirected <- kidneydonors %>% filter(LIV_DON_TY==10)
kidneydonorsnondirected$TX_YEAR <- as.numeric(substr(kidneydonorsnondirected$TX_DATE, 1, 4))
rm(kidneydonorsnondirected)
kidneydonors <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE)
kidneydonorsnondirected <- kidneydonors %>% filter(LIV_DON_TY==10)
kidneydonorsnondirected$TX_YEAR <- as.numeric(substr(kidneydonorsnondirected$TX_DATE, 1, 4))
colnames(liverdonorsnondirected) <- paste(colnames(liverdonorsnondirected), "liver", sep = "_")
colnames(kidneydonorsnondirected) <- paste(colnames(kidneydonorsnondirected), "kidney", sep = "_")
#liverdonorsnondirected <- liverdonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_liver) %>% filter(TX_YEAR_liver >= 2000)
#kidneydonorsnondirected <- kidneydonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_kidney) %>% filter(TX_YEAR_kidney >= 2000)
#class(kidneydonors$DONOR_ID)
unosdata <- left_join(liverdonorsnondirected, kidneydonorsnondirected, by="DONOR_ID")
liverdonorsnondirected <- liverdonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_liver) #%>% filter(TX_YEAR_liver >= 2000)
kidneydonorsnondirected <- kidneydonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_kidney)# %>% filter(TX_YEAR_kidney >= 2000)
#class(kidneydonors$DONOR_ID)
unosdata <- left_join(liverdonorsnondirected, kidneydonorsnondirected, by="DONOR_ID")
View(unosdata)
#class(kidneydonors$DONOR_ID)
unosdata <- inner_join(liverdonorsnondirected, kidneydonorsnondirected, by="DONOR_ID")
#class(kidneydonors$DONOR_ID)
unosdata <- left_join(liverdonorsnondirected, kidneydonorsnondirected, by="DONOR_ID")
View(unosdata)
#class(kidneydonors$DONOR_ID)
liverdonorsnondirected$DONOR_ID
kidneydonorsnondirected$DONOR_ID
#class(kidneydonors$DONOR_ID)
unosdata <- left_join(kidneydonorsnondirected, liverdonorsnondirected, by="DONOR_ID")
#class(kidneydonors$DONOR_ID)
unosdata <- inner_join(kidneydonorsnondirected, liverdonorsnondirected, by="DONOR_ID")
#class(kidneydonors$DONOR_ID)
unosdata <- left_join(kidneydonorsnondirected, liverdonorsnondirected, by="DONOR_ID")
#class(kidneydonors$DONOR_ID)
unosdata <- left_join(liverdonorsnondirected, kidneydonorsnondirected, by="DONOR_ID")
unosdata %>% select(DONOR_ID_liver, DONOR_ID, DONOR_ID_kidney) %>% View()
#liverdonorsnondirected <- liverdonors %>% filter(LIV_DON_TY==10)
liverdonorsnondirected <- liverdonors %>% filter(LIV_DON_TY!=1)
liverdonorsnondirected <- liverdonorsnondirected %>% filter(!is.na(LIV_DON_TY))
liverdonorsnondirected <- liverdonorsnondirected %>% filter(!is.na(LIV_DON_TY) | LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
liverdonorsnondirected <- liverdonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
#kidneydonorsnondirected <- kidneydonors %>% filter(LIV_DON_TY==10)
kidneydonorsnondirected <- kidneydonors %>% filter(LIV_DON_TY!=1)
kidneydonorsnondirected <- kidneydonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
kidneydonorsnondirected$TX_YEAR <- as.numeric(substr(kidneydonorsnondirected$TX_DATE, 1, 4))
colnames(liverdonorsnondirected) <- paste(colnames(liverdonorsnondirected), "liver", sep = "_")
colnames(kidneydonorsnondirected) <- paste(colnames(kidneydonorsnondirected), "kidney", sep = "_")
liverdonorsnondirected <- liverdonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_liver) #%>% filter(TX_YEAR_liver >= 2000)
kidneydonorsnondirected <- kidneydonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_kidney)# %>% filter(TX_YEAR_kidney >= 2000)
#class(kidneydonors$DONOR_ID)
unosdata <- inner_join(liverdonorsnondirected, kidneydonorsnondirected, by="DONOR_ID")
#class(kidneydonors$DONOR_ID)
unosdata <- left_join(liverdonorsnondirected, kidneydonorsnondirected, by="DONOR_ID")
unosdata %>% select(DONOR_ID_liver, DONOR_ID, DONOR_ID_kidney) %>% View()
rm(kidneydonorsnondirected)
rm(liverdonorsnondirected)
#Liverdonors
liverdonors <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR, )
#The first LIV_DON_TY==10 is anonymous donor used by Dorry Segev
#liverdonorsnondirected <- liverdonors %>% filter(LIV_DON_TY==10)
#LIV_DON_TY == 1 is biological blood related parent
liverdonorsnondirected <- liverdonors %>% filter(LIV_DON_TY!=1)
#10 is non biol unrel,12 non biol unrelated domino, 9 is non biol unrel, paired, 999 non biological other unrelated
liverdonorsnondirected <- liverdonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
kidneydonors <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE)
#The first LIV_DON_TY==10 is anonymous donor used by Dorry Segev
#kidneydonorsnondirected <- kidneydonors %>% filter(LIV_DON_TY==10)
#LIV_DON_TY == 1 is biological blood related parent
kidneydonorsnondirected <- kidneydonors %>% filter(LIV_DON_TY!=1)
#10 is non biol unrel,12 non biol unrelated domino, 9 is non biol unrel, paired, 999 non biological other unrelated
kidneydonorsnondirected <- kidneydonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
kidneydonorsnondirected$TX_YEAR <- as.numeric(substr(kidneydonorsnondirected$TX_DATE, 1, 4))
colnames(liverdonorsnondirected) <- paste(colnames(liverdonorsnondirected), "liver", sep = "_")
colnames(kidneydonorsnondirected) <- paste(colnames(kidneydonorsnondirected), "kidney", sep = "_")
liverdonorsnondirected <- liverdonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_liver)
kidneydonorsnondirected <- kidneydonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_kidney)
unosdata <- inner_join(kidneydonorsnondirected, liverdonorsnondirected, by="DONOR_ID")
unosdata <- inner_join(liverdonorsnondirected, kidneydonorsnondirected, by="DONOR_ID")
unosdata <- left_join(liverdonorsnondirected, kidneydonorsnondirected, by="DONOR_ID")
unosdata <- left_join(kidneydonorsnondirected,liverdonorsnondirected, by="DONOR_ID")
rm(liverdonorsnondirected)
rm(kidneydonorsnondirected)
#Liverdonors
liverdonors <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR, )
kidneydonors <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE)
kidneydonorsnondirected$TX_YEAR <- as.numeric(substr(kidneydonorsnondirected$TX_DATE, 1, 4))
kidneydonorsnondirected <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE)
#Liverdonors
liverdonorsnondirected <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR, )
kidneydonorsnondirected$TX_YEAR <- as.numeric(substr(kidneydonorsnondirected$TX_DATE, 1, 4))
colnames(liverdonorsnondirected) <- paste(colnames(liverdonorsnondirected), "liver", sep = "_")
colnames(kidneydonorsnondirected) <- paste(colnames(kidneydonorsnondirected), "kidney", sep = "_")
liverdonorsnondirected <- liverdonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_liver)
kidneydonorsnondirected <- kidneydonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_kidney)
unosdata <- inner_join(kidneydonorsnondirected,liverdonorsnondirected, by="DONOR_ID")
rm(kidneydonorsnondirected)
rm(liverdonorsnondirected)
#Liverdonors
liverdonorsnondirected <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR, )
liverdonorsnondirected$DON_TY
unique(liverdonorsnondirected$DON_TY)
liverdonorsnondirected <- liverdonorsnondirected %>% filter(DON_TY == "L")
kidneydonorsnondirected <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE)
#The first LIV_DON_TY==10 is anonymous donor used by Dorry Segev
#LIV_DON_TY == 1 is biological blood related parent
#kidneydonorsnondirected <- kidneydonors %>% filter(LIV_DON_TY!=1)
#10 is non biol unrel,12 non biol unrelated domino, 9 is non biol unrel, paired, 999 non biological other unrelated
#kidneydonorsnondirected <- kidneydonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
kidneydonorsnondirected <- kidneydonorsnondirected %>% filter(DON_TY == "L")
kidneydonorsnondirected$TX_YEAR <- as.numeric(substr(kidneydonorsnondirected$TX_DATE, 1, 4))
colnames(liverdonorsnondirected) <- paste(colnames(liverdonorsnondirected), "liver", sep = "_")
colnames(kidneydonorsnondirected) <- paste(colnames(kidneydonorsnondirected), "kidney", sep = "_")
liverdonorsnondirected <- liverdonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_liver)
kidneydonorsnondirected <- kidneydonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_kidney)
unosdata <- inner_join(kidneydonorsnondirected,liverdonorsnondirected, by="DONOR_ID")
unosdata <- inner_join(liverdonorsnondirected, kidneydonorsnondirected, by="DONOR_ID")
unosdata <- inner_join(kidneydonorsnondirected, liverdonorsnondirected, by="DONOR_ID")
#Liverdonors
liverdonorsnondirected <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR, )
liverdonorsnondirected <- liverdonorsnondirected %>% filter(DON_TY != "C")
kidneydonorsnondirected <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE)
#The first LIV_DON_TY==10 is anonymous donor used by Dorry Segev
#LIV_DON_TY == 1 is biological blood related parent
#kidneydonorsnondirected <- kidneydonors %>% filter(LIV_DON_TY!=1)
#10 is non biol unrel,12 non biol unrelated domino, 9 is non biol unrel, paired, 999 non biological other unrelated
#kidneydonorsnondirected <- kidneydonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
kidneydonorsnondirected <- kidneydonorsnondirected %>% filter(DON_TY != "C")
kidneydonorsnondirected$TX_YEAR <- as.numeric(substr(kidneydonorsnondirected$TX_DATE, 1, 4))
colnames(liverdonorsnondirected) <- paste(colnames(liverdonorsnondirected), "liver", sep = "_")
colnames(kidneydonorsnondirected) <- paste(colnames(kidneydonorsnondirected), "kidney", sep = "_")
liverdonorsnondirected <- liverdonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_liver)
kidneydonorsnondirected <- kidneydonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_kidney)
unosdata <- inner_join(kidneydonorsnondirected, liverdonorsnondirected, by="DONOR_ID")
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, fig.width = 10, fig.height = 12, results="asis")
# Chunk 2
library(ggplot2)
library(survminer)
library(survival)
library(dplyr)
library(tidyverse)
library(data.table)
library(forestmodel)
library(Hmisc)
library(sjPlot)
library(stargazer)
library(sjmisc)
library(arsenal)
library(gtsummary)
library(expss)
library(lubridate)
library(ggsignif)
library(haven)
scipen=999
livingdonors <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Living Donor/living_donor_data.sas7bdat")
View(livingdonors)
livingdonors %>% select(KIDNEY_RECOV, LIVER_RECOV) %>% filter(KIDNEY_RECOV == 1 & LIVER_RECOV == 1) %>% View()
unique(livingdonors$DONOR_ID)
duplicated(livingdonors$DONOR_ID)
sum(duplicated(livingdonors$DONOR_ID))
count(duplicated(livingdonors$DONOR_ID)
View(duplicated(livingdonors$DONOR_ID))
View(duplicated(livingdonors$DONOR_ID))
!duplicated(livingdonors$DONOR_ID)
sum(!duplicated(livingdonors$DONOR_ID))
liver <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Liver/liver_data.sas7bdat")
kidney <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Kidney_ Pancreas_ Kidney-Pancreas/kidpan_data.sas7bdat")
#Liverdonors
liverdonorsnondirected <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR, )
liverdonorsnondirected <- liver %>% filter(DON_TY == "L")
#Liverdonors
liverdonorsnondirected <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR, )
#liverdonorsnondirected <- liver %>% filter(DON_TY == "L")
#liverdonorsnondirected <- liver %>% filter(TX_YEAR > 2000)
#The first LIV_DON_TY==10 is anonymous donor used by Dorry Segev
#LIV_DON_TY == 1 is biological blood related parent
liverdonorsnondirected <- liverdonorsnondirected %>% filter(LIV_DON_TY==10)
#liverdonorsnondirected <- liverdonors %>% filter(LIV_DON_TY!=1)
#10 is non biol unrel,12 non biol unrelated domino, 9 is non biol unrel, paired, 999 non biological other unrelated
#liverdonorsnondirected <- liverdonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
kidney$TX_YEAR <- as.numeric(substr(kidney$TX_DATE, 1, 4))
kidneydonorsnondirected <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE, TX_YEAR)
#The first LIV_DON_TY==10 is anonymous donor used by Dorry Segev
#LIV_DON_TY == 1 is biological blood related parent
#kidneydonorsnondirected <- kidneydonors %>% filter(LIV_DON_TY!=1)
#10 is non biol unrel,12 non biol unrelated domino, 9 is non biol unrel, paired, 999 non biological other unrelated
#kidneydonorsnondirected <- kidneydonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
kidneydonorsnondirected <- kidneydonorsnondirected %>% filter(LIV_DON_TY==10)
colnames(liverdonorsnondirected) <- paste(colnames(liverdonorsnondirected), "liver", sep = "_")
colnames(kidneydonorsnondirected) <- paste(colnames(kidneydonorsnondirected), "kidney", sep = "_")
liverdonorsnondirected <- liverdonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_liver)
kidneydonorsnondirected <- kidneydonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_kidney)
unosdata <- inner_join(livingdonors, kidneydonorsnondirected, by="DONOR_ID")
unosdata <- inner_join(livingdonors, liverdonorsnondirected, kidneydonorsnondirected, by="DONOR_ID")
View(unosdata)
liverdonorsnondirected <- liver %>% filter(DON_TY == "L")
#Liverdonors
liverdonorsnondirected <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR, )
liverdonorsnondirected <- liverdonorsnondirected %>% filter(DON_TY == "L")
#liverdonorsnondirected <- liverdonors %>% filter(LIV_DON_TY!=1)
#10 is non biol unrel,12 non biol unrelated domino, 9 is non biol unrel, paired, 999 non biological other unrelated
#liverdonorsnondirected <- liverdonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
kidney$TX_YEAR <- as.numeric(substr(kidney$TX_DATE, 1, 4))
kidneydonorsnondirected <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE, TX_YEAR)
#The first LIV_DON_TY==10 is anonymous donor used by Dorry Segev
#LIV_DON_TY == 1 is biological blood related parent
#kidneydonorsnondirected <- kidneydonors %>% filter(LIV_DON_TY!=1)
#10 is non biol unrel,12 non biol unrelated domino, 9 is non biol unrel, paired, 999 non biological other unrelated
#kidneydonorsnondirected <- kidneydonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
#kidneydonorsnondirected <- kidneydonorsnondirected %>% filter(LIV_DON_TY==10)
kidneydonorsnondirected <- kidneydonorsnondirected %>% filter(DON_TY == "L")
colnames(liverdonorsnondirected) <- paste(colnames(liverdonorsnondirected), "liver", sep = "_")
colnames(kidneydonorsnondirected) <- paste(colnames(kidneydonorsnondirected), "kidney", sep = "_")
liverdonorsnondirected <- liverdonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_liver)
kidneydonorsnondirected <- kidneydonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_kidney)
unosdata <- inner_join(livingdonors, kidneydonorsnondirected, by="DONOR_ID")
unosdata <- inner_join(unosdata, liverdonorsnondirected, by="DONOR_ID")
View(livingdonors)
livingdonors %>% group_by(KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV) %>% count()
livingdonors %>% group_by(DON_ORG2, KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV) %>% count()
livingdonors %>% group_by(DON_ORG, DON_ORG2, KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV) %>% count()
livingdonors %>% group_by(DON_ORG, DON_ORG2, KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV, LIV_DON_TY, LIV_DON_TY_OSTXT) %>% count()
livingdonors %>% group_by(DON_ORG, DON_ORG2, KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV, DON_DATE) %>% count()
livingdonors %>% group_by(DON_ORG, DON_ORG2, KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV) %>% count()
livingdonors %>% group_by(DONOR_ID, DON_ORG, DON_ORG2, KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV) %>% count()
livingdonors %>% group_by(DON_ORG, DON_ORG2, KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV) %>% count()
livingdonors %>% group_by(DON_ORG, DON_ORG2) %>% count()
livingdonors %>% group_by(DON_ORG, DON_ORG2, KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV) %>% count()
livingdonors <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Living Donor/living_donor_data.sas7bdat")
livingdonors %>% group_by(DON_ORG, DON_ORG2, KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV) %>% count()
livingdonors %>% group_by(DON_ORG, DON_ORG2, KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV) %>% count(n=50)
livingdonors %>% group_by(DON_ORG, DON_ORG2, KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV) %>% View()
livingdonors %>% group_by(DON_ORG, DON_ORG2, KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV) %>% count()
#Liverdonors
liverdonorsnondirected <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR, )
liverdonorsnondirected <- liverdonorsnondirected %>% filter(DON_TY == "L")
unosdata <- inner_join(livingdonors, liverdonorsnondirected, by="DONOR_ID")
unosdata %>% group_by(DON_ORG, DON_ORG2, KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV) %>% count()
#liverdonorsnondirected <- liverdonors %>% filter(LIV_DON_TY!=1)
#10 is non biol unrel,12 non biol unrelated domino, 9 is non biol unrel, paired, 999 non biological other unrelated
#liverdonorsnondirected <- liverdonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
kidney$TX_YEAR <- as.numeric(substr(kidney$TX_DATE, 1, 4))
kidneydonorsnondirected <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE, TX_YEAR)
#The first LIV_DON_TY==10 is anonymous donor used by Dorry Segev
#LIV_DON_TY == 1 is biological blood related parent
#kidneydonorsnondirected <- kidneydonors %>% filter(LIV_DON_TY!=1)
#10 is non biol unrel,12 non biol unrelated domino, 9 is non biol unrel, paired, 999 non biological other unrelated
#kidneydonorsnondirected <- kidneydonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
#kidneydonorsnondirected <- kidneydonorsnondirected %>% filter(LIV_DON_TY==10)
kidneydonorsnondirected <- kidneydonorsnondirected %>% filter(DON_TY == "L")
unosdata <- inner_join(livingdonors, kidneydonorsnondirected, by="DONOR_ID")
unosdata %>% group_by(DON_ORG, DON_ORG2, KIDNEY_RECOV, LIVER_RECOV, LUNG_RECOV) %>% count()
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, fig.width = 10, fig.height = 12, results="asis")
# Chunk 2
library(ggplot2)
library(survminer)
library(survival)
library(dplyr)
library(tidyverse)
library(data.table)
library(forestmodel)
library(Hmisc)
library(sjPlot)
library(stargazer)
library(sjmisc)
library(arsenal)
library(gtsummary)
library(expss)
library(lubridate)
library(ggsignif)
library(haven)
scipen=999
liver <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Liver/liver_data.sas7bdat")
#Liverdonors
liverdonorsnondirected <- liver %>% select(DONOR_ID, AGE_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, HEP_C_ANTI_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, CITIZENSHIP_DON, CMV_IGM_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, ETHCAT_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, RECOVERY_DATE_DON, DIABDUR_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, HBV_DNA_DON, HCV_RNA_DON, LIV_DON_TY, LIV_DON_TY_OSTXT, COD_OSTXT_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_CONF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_OTH1_OSTXT_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_COCAINE_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, HIST_COCAINE_DON, HIST_DIABETES_DON, DIABETES_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, HIST_OTH_DRUG_DON, ABO_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, SKIN_CANCER_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, HYPERTENS_DUR_DON, INSULIN_DEP_DON, PT_OTH_DON, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, ECD_DONOR, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, ALCOHOL_HEAVY_DON, LITYP, ABO_MAT, DISTANCE, COLD_ISCH, MULTIORG, SHARE_TY, EDUCATION_DON, PRI_PAYMENT_CTRY_DON, PRI_PAYMENT_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, CONTROLLED_DON, TATTOOS, LI_BIOPSY, PROTEIN_URINE, INOTROP_SUPPORT_DON, REFERRAL_DATE, ADMIT_DATE_DON, HBSAB_DON, EBV_IGG_CAD_DON, EBV_IGM_CAD_DON, TRANSFUS_TERM_DON, TRANSFUS_INTRAOP_NUM_OLD_DON, TRANSFUS_PRIOR_NUM_OLD_DON, CDC_RISK_HIV_DON, MACRO_FAT_LI_DON, MICRO_FAT_LI_DON, HISTORY_MI_DON, LV_EJECT_DON, LV_EJECT_METH_DON, VESSELS_NUM_STEN_DON, PH_DON, HEMATOCRIT_DON, INO_PROCURE_AGENT_1, INO_PROCURE_AGENT_2, INO_PROCURE_AGENT_3, INO_PROCURE_OSTXT_1, INO_PROCURE_OSTXT_2, INO_PROCURE_OSTXT_3, CORONARY_ANGIO_DON, CORONARY_ANGIO_NORM_DON, TX_YEAR, LT_ONE_WEEK_DON, PROTEIN_URINE, CARDARREST_NEURO, RESUSCIT_DUR, )
#liverdonorsnondirected <- liverdonorsnondirected %>% filter(DON_TY == "L")
#liverdonorsnondirected <- liver %>% filter(TX_YEAR > 2000)
#The first LIV_DON_TY==10 is anonymous donor used by Dorry Segev
#LIV_DON_TY == 1 is biological blood related parent
liverdonorsnondirected <- liverdonorsnondirected %>% filter(LIV_DON_TY==10)
#liverdonorsnondirected <- liverdonors %>% filter(LIV_DON_TY!=1)
#10 is non biol unrel,12 non biol unrelated domino, 9 is non biol unrel, paired, 999 non biological other unrelated
#liverdonorsnondirected <- liverdonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
kidney$TX_YEAR <- as.numeric(substr(kidney$TX_DATE, 1, 4))
kidneydonorsnondirected <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE, TX_YEAR)
#liverdonorsnondirected <- liverdonors %>% filter(LIV_DON_TY!=1)
#10 is non biol unrel,12 non biol unrelated domino, 9 is non biol unrel, paired, 999 non biological other unrelated
#liverdonorsnondirected <- liverdonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
kidney$TX_YEAR <- as.numeric(substr(kidney$TX_DATE, 1, 4))
kidney <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Kidney_ Pancreas_ Kidney-Pancreas/kidpan_data.sas7bdat")
colnames(liverdonorsnondirected) <- paste(colnames(liverdonorsnondirected), "liver", sep = "_")
colnames(kidneydonorsnondirected) <- paste(colnames(kidneydonorsnondirected), "kidney", sep = "_")
#liverdonorsnondirected <- liverdonors %>% filter(LIV_DON_TY!=1)
#10 is non biol unrel,12 non biol unrelated domino, 9 is non biol unrel, paired, 999 non biological other unrelated
#liverdonorsnondirected <- liverdonorsnondirected %>% filter(LIV_DON_TY == 10 | LIV_DON_TY == 12 | LIV_DON_TY == 9 | LIV_DON_TY == 999)
kidney$TX_YEAR <- as.numeric(substr(kidney$TX_DATE, 1, 4))
kidneydonorsnondirected <- kidney %>% select(DONOR_ID, NPKID, NPPAN, HAPLO_TY_MATCH_DON, AGE_DON, DDAVP_DON, CMV_OLD_LIV_DON, CMV_DON, CMV_TEST_DON, EBV_TEST_DON, HBV_TEST_DON, HCV_TEST_DON, CMV_NUCLEIC_DON, CMV_IGG_DON, CMV_IGM_DON, EBV_DNA_DON, EBV_IGG_DON, EBV_IGM_DON, HBV_CORE_DON, HBV_SUR_ANTIGEN_DON, ETHCAT_DON, COD_CAD_DON, DEATH_CIRCUM_DON, DEATH_MECH_DON, CITIZENSHIP_DON, HEP_C_ANTI_DON, HCV_RNA_DON, ABO_DON, DON_TY, GENDER_DON, HOME_STATE_DON, WARM_ISCH_TM_DON, HCV_RIBA_DON, HCV_ANTIBODY_DON, LIV_DON_TY, CITIZEN_COUNTRY_DON, COD_OSTXT_DON, CONTROLLED_DON, CORE_COOL_DON, NON_HRT_DON, ANTIHYPE_DON, BLOOD_INF_DON, BLOOD_INF_CONF_DON, BUN_DON, CREAT_DON, DOBUT_DON_OLD, DOPAMINE_DON_OLD, HTLV1_OLD_DON, HTLV2_OLD_DON, OTH_DON_MED1_OSTXT_DON_OLD, OTH_DON_MED2_OSTXT_DON_OLD, OTH_DON_MED3_OSTXT_DON_OLD, OTHER_INF_DON, OTHER_INF_CONF_DON, OTHER_INF_OSTXT_DON, PRETREAT_MED_DON_OLD, PT_DIURETICS_DON, PT_STEROIDS_DON, PT_T3_DON, PT_T4_DON, PT_OTH2_OSTXT_DON, PT_OTH3_OSTXT_DON, PT_OTH4_OSTXT_DON, PT_OTH1_OSTXT_DON, PULM_INF_DON, PULM_INF_CONF_DON, SGOT_DON, SGPT_DON, TBILI_DON, URINE_INF_DON, URINE_INF_CONF_DON, VASODIL_DON, VDRL_DON, CLIN_INFECT_DON, HYPERTENS_DUR_DON, CANCER_FREE_INT_DON, CANCER_OTH_OSTXT_DON, CONTIN_ALCOHOL_OLD_DON, CONTIN_CIG_DON, CONTIN_IV_DRUG_OLD_DON, CONTIN_COCAINE_DON, CONTIN_OTH_DRUG_DON, DIET_DON, DIURETICS_DON, EXTRACRANIAL_CANCER_DON, HIST_ALCOHOL_OLD_DON, CANCER_SITE_DON, HIST_CIG_DON, DIABDUR_DON, HIST_COCAINE_DON, HIST_HYPERTENS_DON, HIST_IV_DRUG_OLD_DON, INSULIN_DEP_DON, INTRACRANIAL_CANCER_DON, OTHER_HYPERTENS_MED_DON, HIST_CANCER_DON, HIST_INSULIN_DEP_DON, INSULIN_DUR_DON, HIST_DIABETES_DON, HIST_OTH_DRUG_DON, SKIN_CANCER_DON, DIABETES_DON, LIV_DON_TY_OSTXT, HEPARIN_DON, ARGININE_DON, INSULIN_DON, HGT_CM_DON_CALC, WGT_KG_DON_CALC, BMI_DON_CALC, KDPI, KDRI_MED, KDRI_RAO, HBV_NAT_DON, HCV_NAT_DON, HIV_NAT_DON, EGFR_CKDEPI_DON, ABO_MAT, DISTANCE, COLD_ISCH_KI,  ECD_DONOR, LT_ONE_WEEK_DON, EDUCATION_DON, KI_CREAT_PREOP, KI_PROC_TY, PRI_PAYMENT_DON, PRI_PAYMENT_CTRY_DON, MEDICARE_DON, MEDICAID_DON, OTH_GOVT_DON, PRIV_INS_DON, HMO_PPO_DON, SELF_DON, DONATION_DON, FREE_DON, RECOV_OUT_US, RECOV_COUNTRY, PROTEIN_URINE, LIPASE, AMYLASE, INOTROP_AGENTS, CARDARREST_NEURO, RESUSCIT_DUR, INOTROP_SUPPORT_DON, TATTOOS, LT_KI_BIOPSY, LT_KI_GLOMERUL, RT_KI_BIOPSY, RT_KI_GLOMERUL, REFERRAL_DATE, RECOVERY_DATE, TX_DATE, TX_YEAR)
colnames(kidneydonorsnondirected) <- paste(colnames(kidneydonorsnondirected), "kidney", sep = "_")
liverdonorsnondirected <- liverdonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_liver)
kidneydonorsnondirected <- kidneydonorsnondirected %>% mutate(DONOR_ID = DONOR_ID_kidney)
unosdata <- inner_join(liverdonorsnondirected, kidneydonorsnondirected, by="DONOR_ID")
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE, fig.width = 10, fig.height = 12, results="asis")
# Chunk 2
library(ggplot2)
library(survminer)
library(survival)
library(dplyr)
library(tidyverse)
library(data.table)
library(forestmodel)
library(Hmisc)
library(sjPlot)
library(stargazer)
library(sjmisc)
library(arsenal)
library(gtsummary)
library(expss)
library(lubridate)
library(ggsignif)
library(haven)
scipen=999
# Chunk 3
liver <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Liver/liver_data.sas7bdat")
kidney <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Kidney_ Pancreas_ Kidney-Pancreas/kidpan_data.sas7bdat")
livingdonors <- read_sas("/Users/Ivanics/Desktop/Research/62. UNOS/UNOS general/UNOS/STAR_SAS Dataset/Living Donor/living_donor_data.sas7bdat")
